# **開発プロセスにおける問題の特定と解決策の記録**

* 課題／問題 (解決策)
> 次の課題など

## **Project**
* ローカル側の文字コードを`Shift-JIS`から一括で`UTF-8`へ変換する
* **フォルダ構造の整理**

## **Architecture**
* ~~ゲーム用ロジックとシステム(エンジン)用ロジックの分離~~　(`描画データ(3D)`に基づく`論理データ(2D)`の初期化) (入力に基づく`論理データ(2D)`(の更新)による`描画データ(3D)`の更新)
> ゲームエディタ的機能の充実化 (より直感的かつ柔軟に)

## **ECS**
* `Entity`の階層関係の定義と名前による意味づけの実装
    * `Entity`の名前の重複を制限する処理
    * 名前検索処理 -> 効率化
* **`Entity`の寿命管理のいい方法を考える (`Entity`を消しても`Component`は残る。`Entity`を参照する処理があると、削除を慎重に管理する必要がある)**

## **Physical Layer**
* 物理レイヤー(コリジョン)の実装
    * ~~地面の実装~~(`TerrainMesh`のによる`論理タイルマップ`の自動初期化)
    * ~~障害物の実装~~(`ObstacleActor`／`Component`による`静的障害物オブジェクト`による`論理タイルマップWalkable属性`の自動初期化)
> 処理最適化および改善の余地あり

* 描画用データと物理用データの柔軟で直観的な連携の処理の実装
    * 論理空間(ロジック)と描画空間(ビジュアル)で、見た目の大きさと意味のある当たり判定／行動範囲を一致させる方法を考える
* 描画データによる論理データ初期化時に、回転を考慮しようとすると、スケール、回転中心、様々な誤差によるズレが生じる問題

## **Camera**
* ~~システム用カメラとゲーム用カメラの分離~~
* 論理カメラの実装(XZ平面を真上から撮る)
* カメラオフセットのZ軸の数値によって描画がうまくいかない問題（例：0）

## **input**
* `Input`データ／処理構造の改善
    * `システムInput系`と`GameInput系`の分離
* キー状態管理と、その状態変化による副作用の厳密な分離
* 操作性の改善　(プレイヤーが何を基準にキャラクターを移動させたり、視点を回転させたりするかを選択できるようにする。)

## **RenderSystem**
* ~~VAOやVBOなどのOpenGLバッファを`MeshComponent`から正確に抽出し、`ModelData`と連携させる~~(2025/04/26)
    * 解決策は、forループを追加して中間データを処理すること
* テクスチャシェーダーとレンダリングパイプラインの実装
* ライティングシェーダーと描画パイプラインの実装
* ~~カメラの移動と回転の実装~~(2025/04/28)
    * `RenderContext`での1フレーム遅延はどうすればいいのか考える。

## **3D Model **
* Mixamoアニメーション再生機能の実装
* 3Dモデルの`原点位置`を統一する処理の実装
* 3Dモデルの`正面(front)`をどのように`取得`または`定義`するか

## **Game Objects(Actor)**
* アクターオブジェクトクラスの内部構造を簡単化するためのアーキテクチャの検討
* アクターごとに`Entity`を作成するのではなく`Mesh`ごとに`Entity`を作成しそれを管理する方法を考える
    * `Entity`に階層構造を持たせる
    * `Entity`に名前を付ける
    * `Entity`と`Actor`を`名前`をもとに結びつける（案）
* `Entity`と`Component`のテンプレート化によるアクター作成の簡略化処理の実装

## **システム**
* テクスチャインポータの実装
* ロードログの取得・表示機能の実装
* ~~WindowManagerの実装~~(2025/04/29)
* エンジン(開発)用カメラの実装と、ゲーム用カメラの実装、その分離
* **有意味なデータリストと検索ロジックの実装(Entityに名前をつけたり、名前で効率的に検索したりする処理)**／**機械的処理との分離**
* ベクトルの正規化処理の安全性を高める処理を実装(0ベクトルの正規化を安全に実行する処理)

## **FUTURE**
* UIによるゲーム編集機能の実装
* ゲームテンプレートでプロトタイピングを簡素化
* **シーン指向プロトタイピング支援エンジン**